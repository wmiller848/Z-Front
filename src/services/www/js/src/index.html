<html>

  <head>
    <title>Z-Front</title>

    <script>Module={};Module.TOTAL_MEMORY = 10000000;</script>
    <script src="/js/malefic.min.js"></script>
    <script src="/js/libzcoderz.js"></script>
    <script src="/js/zcoderz.js"></script>
  </head>

  <body>
    <div style="margin:auto;text-align:center;">
      <h1>Z-Front :: ZCoderz</h1>
      <canvas width="1000px" height="500px" style="background-color:#000000;"></canvas>
    </div>

    <script>

      console.log(ZFRONT);

      var url = "/swfa.ivf";
      var transport_promise = new ZFRONT.ZTransportHTTP(url);
      var zcoderz = null;

      transport_promise.Info = function(status, info) {
        console.log(status, info);
      };
      transport_promise.Open = function(zstream) {
        console.log(url + " opened")
        zcoderz = new ZFRONT.ZCoderz(zstream);

        console.log("Waiting for frame...")
        zcoderz.On('frame', function(frame) {
          console.log("frame", frame);
        });
      };
      transport_promise.Close = function() {
        console.log(url + " closed");
        zcoderz.Destroy();
      }
      transport_promise.Error = function(err) {
        console.error(err);
      }

    </script>
  </body>
</html>
