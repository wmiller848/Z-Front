<html>

  <head>
    <title>Z-Front</title>

    <script src="/js/malefic.min.js"></script>
    <script src="/js/libzcoderz.js"></script>
    <script src="/js/zcoderz.js"></script>
  </head>

  <body>
    <h1>Test</h1>

    <script>
      console.log("Www-js");

      var core = new Malefic.Core();
      console.log(core);

      var url = "/swfa.ivf";
      var video = core.Ajax(url);
      video.status = function(status) {
        console.log(url + " loaded " + status);
      };
      video.then = function(err, res) {
        if (err) {
          return console.error(err);
        }
        var arr = res.toArray();
        console.log(arr);

        var ivf_header = arr.subarray(0, 32);
        console.log("ivf_header", ivf_header);

        var zcoderz = new ZCoderz(ivf_header);
        console.log("zcoderz", zcoderz);

        var start = 32;
        var size = 2048;
        var network_bytes = arr.subarray(start, (start + size));
        console.log("network_bytes", network_bytes);
        zcoderz.write(network_bytes);

        var frame = zcoderz.get_frame();
        console.log(frame);
      }
    </script>
  </body>
</html>
